<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Cadastro de Pessoas</title>

    <h:outputScript library="js" name="locale-primefaces.js"/>
</h:head>
<h:body>

    <p:growl sticky="true"/>

    <div id="menu">
        <ui:insert name="menu" >
            <ui:include src="navbar.xhtml" />
        </ui:insert>
    </div>
    <h1 style="text-align: center;">Cadastro de Pessoas</h1>
    <h:form>
        <div class="ui-fluid">
            <p:panelGrid columns="2" layout="grid" columnClasses="ui-g-4 ui-md-3 ui-lg-1 , ui-g-8 ui-md-9 ui-lg-11"
                         styleClass="ui-panelgrid-blank">
                <p:outputLabel for="profissao" value="Profiss達o:"/>
                <p:selectOneMenu id="profissao" value="#{pessoaBean.pessoa.profissao}">
                    <f:selectItem noSelectionOption="true" itemLabel="Selecione uma Profiss達o..."/>
                    <f:selectItems value="#{pessoaBean.profissaos}" var="pr" itemLabel="#{pr.descricao}"/>
                </p:selectOneMenu>
                <p:outputLabel for="nome" value="Nome: "/>
                <p:inputText
                        id="nome"
                        required="true"
                        requiredMessage="Nome deve ser preenchido"
                        value="#{pessoaBean.pessoa.nome}" placeholder="Informe seu nome"
                />
                <p:outputLabel for="email" value="Email: "/>
                <p:inputText id="email"
                             required="true"
                             validator="emailValidator"
                             requiredMessage="Email deve ser preenchido"
                             value="#{pessoaBean.pessoa.email}"
                             placeholder="Informe seu e-mail"/>

                <p:outputLabel for="nascimento" value="Nascimento: "/>
                <p:calendar id="nascimento"
                            pattern="dd/MM/yyyy"
                            timeZone="#{initParam.timezone}"
                            mask="true"
                            locale="pt_BR"
                            required="true"
                            requiredMessage="Nascimento deve ser preenchido"
                            converterMessage="Data no formato invalido. Use: dd/mm/aaaa"
                            value="#{pessoaBean.pessoa.nascimento}"
                            placeholder="dd/mm/aaaa">
                </p:calendar>
            </p:panelGrid>
        </div>
        <p:spacer height="10px"/>
        <p:toolbar>
            <f:facet name="left">
                <p:commandButton
                        type="reset"
                        ajax="false"
                        icon="fa fa-eraser"
                        action="#{pessoaBean.limpar()}"
                        value="Limpar"/>
                <p:commandButton
                        ajax="false"
                        icon="fa fa-save"
                        action="#{pessoaBean.salvar()}"
                        value="Salvar"/>
            </f:facet>
        </p:toolbar>
    </h:form>
    <p:spacer height="10px"/>

    <h:form>
        <p:dataTable
                reflow="true"
                value="#{pessoaBean.pessoas}"
                var="p">

            <p:column headerText="Nome">
                <h:outputText value="#{p.nome}"/>
            </p:column>

            <p:column headerText="Email">
                <h:outputText value="#{p.email}"/>
            </p:column>

            <p:column headerText="Nascimento">
                <h:outputText value="#{p.nascimento}">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
            </p:column>

            <p:column headerText="Idade">
                <f:facet name="header">Idade</f:facet>
                <h:outputText value="#{p.idade}"/>
            </p:column>

            <p:column headerText="Profiss達o">
                <f:facet name="header">Profiss達o</f:facet>
                <h:outputText value="#{p.profissao.descricao}"/>
            </p:column>

            <p:column>
                <p:commandButton
                        ajax="false"
                        icon="fa fa-pencil">
                    <f:setPropertyActionListener
                            target="#{pessoaBean.pessoa}"
                            value="#{p}"/>
                </p:commandButton>
                <p:commandButton
                        ajax="false"
                        icon="fa fa-trash"
                        action="#{pessoaBean.remover}">
                    <f:setPropertyActionListener
                            target="#{pessoaBean.pessoa}"
                            value="#{p}"/>
                </p:commandButton>
            </p:column>
        </p:dataTable>
    </h:form>

</h:body>
</html>
